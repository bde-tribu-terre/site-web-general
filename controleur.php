<?php
########################################################################################################################
# VÃ©rification du protocole (les deux fonctionnent, mais on veut forcer le passage par HTTPS)                           #
########################################################################################################################
if ($_SERVER["HTTPS"] != "on") {
    header("Location: https://" . $_SERVER["HTTP_HOST"] . $_SERVER["REQUEST_URI"]);
    exit();
}

########################################################################################################################
# Chargement des variables d'environnement                                                                             #
########################################################################################################################
require ROOT . "../secrets.php";

########################################################################################################################
# Chargement de l'autoloader                                                                                           #
########################################################################################################################
require ROOT . "autoloaded/Autoloader.class.php";

########################################################################################################################
# Activation des checkers                                                                                              #
########################################################################################################################
App\Checker\SitemapChecker::new(ROOT)->check();
App\Checker\ThumbnailChecker::new(ROOT . "journaux/")->check();

########################################################################################################################
# Version du site                                                                                                      #
########################################################################################################################
define('VERSION_SITE', file_get_contents(ROOT . '/version.txt'));
